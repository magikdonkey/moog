<html>
<header>
    <meta charset="UTF-8">

    <style>
        #canvas {
            border: 1px black solid;
        }
        
        body{
            background-color: lightblue;
        }

        a {
            color: #000;
        }
    </style>
</header>
<body>

<canvas id="canvas" width="640" height="480"></canvas>
<div>
    <a href="javascript:void(0)" onclick="reset()">Reset</a>
    <a href="javascript:void(0)" onclick="stop()">Stop</a>
    <a href="javascript:void(0)" onclick="start()">Start</a>
</div>
<script>

var canvas = document.getElementById('canvas');
var ctx = canvas.getContext('2d');

var elemLeft = canvas.offsetLeft;
var elemTop = canvas.offsetTop;


function random_colour()
{
    var r = 255 * Math.random() | 0,
        g = 255 * Math.random() | 0,
        b = 255 * Math.random() | 0;
    return 'rgb(' + r + ',' + g + ',' + b + ')';
}

function random_grey()
{
    var r = 255 * Math.random() | 0;
    return 'rgb(' + r + ',' + r + ',' + r + ')';
}

var i = 1;
var j = 1;

var x = 0;
var y = 0;

var x2 = 0;
var y2 = 0;

canvas.addEventListener("mousedown", function(event)
{
    x = event.pageX - elemLeft;
    y = event.pageY - elemTop;
});

canvas.addEventListener("mouseup", function(event)
{
    x2 =   (event.pageX - elemLeft);
    y2 =  (event.pageY - elemTop);
});

function reset()
{
    i = 0;
    j = 0;
}

function draw()
{
    //ctx.clearRect(0, 0, 640, 480);
    //ctx.fillRect(x, y, 10, 10);
    //ctx.fillRect(x2, y2, 10, 10);

    var midx = (x + x2) / 2.0;
    var midy = (y + y2) / 2.0;

    var size = Math.sqrt( ((x - x2) * (x - x2)) + ((y - y2) * (y - y2)) ) / 2;

    ctx.beginPath();
    ctx.arc(midx, midy, size, 0, Math.PI * 2, false); // Outer circle
    ctx.stroke();
}

function update()
{
    ctx.fillStyle = random_grey();

    i += 1;
    j += 1;
}

var updateInterval = setInterval(update, 100);
var drawInterval = setInterval(draw, 18);

function stop()
{
    clearInterval(updateInterval);
}

function start()
{
    updateInterval = setInterval(update, 100);
}

</script>
</body>
</html>